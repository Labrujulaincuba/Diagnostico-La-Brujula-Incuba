<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Herramienta de Diagn√≥stico y Plan de Acci√≥n para Emprendimientos</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Inter', sans-serif;
        }
        .question-card {
            transition: all 0.3s ease-in-out;
        }
        .question-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -2px rgba(0, 0, 0, 0.05);
        }
        .option-label {
            display: block;
            padding: 1rem;
            border: 1px solid #e5e7eb;
            border-radius: 0.5rem;
            cursor: pointer;
            transition: all 0.2s ease;
        }
        .option-label:hover {
            background-color: #f9fafb;
            border-color: #6366f1;
        }
        input[type="radio"]:checked + .option-label {
            background-color: #eef2ff;
            border-color: #6366f1;
            box-shadow: 0 0 0 2px #c7d2fe;
        }
        
        /* --- Enhanced Print Styles --- */
        @media print {
            body {
                -webkit-print-color-adjust: exact;
                print-color-adjust: exact;
            }
            body * {
                visibility: hidden;
            }
            #results-section, #results-section * {
                visibility: visible;
            }
            #results-section {
                position: absolute;
                left: 0;
                top: 0;
                width: 100%;
                margin: 0;
                padding: 0;
                border: none;
                box-shadow: none;
            }
            .no-print {
                display: none;
            }
            #score-summary {
                display: grid !important;
                grid-template-columns: repeat(2, 1fr) !important;
                gap: 1rem !important;
            }
            #action-plan > div {
                page-break-inside: avoid;
            }
            .bg-red-100 { background-color: #fee2e2 !important; }
            .bg-yellow-100 { background-color: #fef3c7 !important; }
            .bg-green-100 { background-color: #dcfce7 !important; }
            .bg-red-500 { background-color: #ef4444 !important; }
            .bg-yellow-500 { background-color: #f59e0b !important; }
            .bg-green-500 { background-color: #22c55e !important; }
            .text-white { color: white !important; }
        }
    </style>
</head>
<body class="bg-gray-50 text-gray-800">

    <div id="app" class="container mx-auto p-4 sm:p-6 md:p-8 max-w-4xl">
        
        <!-- Welcome Section -->
        <div id="welcome-section" class="text-center mb-12">
            <h1 class="text-4xl font-bold text-gray-900 mb-2">Herramienta de Diagn√≥stico para Emprendimientos</h1>
            <p class="text-lg text-gray-600">Eval√∫a la salud de tu negocio y obt√©n un plan de acci√≥n personalizado.</p>
        </div>

        <!-- Form Section -->
        <form id="diagnostic-form">
            <!-- Contact Info Section -->
            <div class="bg-white p-6 rounded-xl shadow-md border border-gray-200 mb-8">
                 <h2 class="text-xl font-bold mb-6 text-indigo-700">1. Datos del Proyecto</h2>
                 <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                    <div>
                        <label for="projectName" class="block text-sm font-medium text-gray-700 mb-1">Nombre del Proyecto</label>
                        <input type="text" id="projectName" name="projectName" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="entrepreneurName" class="block text-sm font-medium text-gray-700 mb-1">Tu Nombre</label>
                        <input type="text" id="entrepreneurName" name="entrepreneurName" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="entrepreneurEmail" class="block text-sm font-medium text-gray-700 mb-1">Tu Correo Electr√≥nico</label>
                        <input type="email" id="entrepreneurEmail" name="entrepreneurEmail" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                    </div>
                    <div>
                        <label for="diagnosticType" class="block text-sm font-medium text-gray-700 mb-1">Tipo de Diagn√≥stico</label>
                        <select id="diagnosticType" name="diagnosticType" class="w-full px-3 py-2 border border-gray-300 rounded-md shadow-sm focus:ring-indigo-500 focus:border-indigo-500" required>
                            <option value="" disabled selected>Selecciona una opci√≥n...</option>
                            <option value="Inicial">Diagn√≥stico Inicial (Antes del programa)</option>
                            <option value="Final">Diagn√≥stico Final (Despu√©s del programa)</option>
                        </select>
                    </div>
                 </div>
            </div>

            <div id="questions-container" class="space-y-8">
                <!-- Questions will be injected here by JavaScript -->
            </div>

            <div class="mt-12 text-center">
                <button type="submit" id="submit-button" class="bg-indigo-600 text-white font-bold py-3 px-8 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-4 focus:ring-indigo-300 transition duration-300 transform hover:scale-105">
                    Generar Diagn√≥stico y Plan de Acci√≥n
                </button>
            </div>
        </form>

        <!-- Results Section -->
        <div id="results-section" class="hidden mt-12">
            <div class="bg-white p-8 rounded-xl shadow-lg border border-gray-200">
                <h2 class="text-3xl font-bold text-center mb-2">Tu Diagn√≥stico</h2>
                <div id="results-contact-info" class="text-center text-gray-600 mb-6"></div>
                <div id="overall-diagnosis" class="text-center mb-8 p-4 rounded-lg"></div>
                
                <!-- Action Buttons -->
                <div class="border-t border-b border-gray-200 py-6 my-8 no-print">
                    <h3 class="text-lg font-semibold text-center text-gray-800 mb-4">Acciones</h3>
                    <div class="flex flex-col sm:flex-row justify-center items-center gap-4">
                        <button id="print-button" class="w-full sm:w-auto bg-gray-700 text-white font-semibold py-2 px-6 rounded-lg hover:bg-gray-800 transition duration-300">Imprimir / Guardar PDF</button>
                        <button id="restart-button" class="w-full sm:w-auto bg-gray-200 text-gray-800 font-semibold py-2 px-6 rounded-lg hover:bg-gray-300 transition duration-300">Hacer un nuevo diagn√≥stico</button>
                    </div>
                </div>

                <h3 class="text-2xl font-bold mb-6 border-b pb-2">Resumen de Puntuaci√≥n por √Årea</h3>
                <div id="score-summary" class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-8"></div>

                <h3 class="text-2xl font-bold mb-6 mt-10 border-b pb-2">Plan de Acci√≥n Personalizado</h3>
                <div id="action-plan" class="space-y-6"></div>
            </div>
        </div>

    </div>

    <script>
        const questions = [
            {
                area: "Propuesta de Valor y Producto/Servicio",
                items: [
                    {
                        q: "¬øQu√© tan bien definido est√° el problema que resuelves?",
                        options: [
                            { text: "Es una idea interesante, pero no estoy seguro de qu√© problema real soluciona o para qui√©n.", score: 1 },
                            { text: "Ofrecemos un producto que es un 'lujo' o 'gusto', algo que los clientes quieren pero no necesitan con urgencia.", score: 2 },
                            { text: "Resolvemos un problema claro, urgente y valioso para un segmento de clientes bien definido.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øCu√°l es tu principal diferenciador frente a la competencia?",
                        options: [
                            { text: "Hacemos casi lo mismo que los dem√°s; competimos principalmente por precio.", score: 1 },
                            { text: "Tenemos algunas mejoras o caracter√≠sticas √∫nicas, pero podr√≠an ser copiadas f√°cilmente.", score: 2 },
                            { text: "Poseemos una ventaja competitiva sostenible (tecnolog√≠a propia, patente, marca fuerte, efecto de red).", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Soluci√≥n y Validaci√≥n",
                items: [
                    {
                        q: "¬øQu√© tan definidas est√°n las caracter√≠sticas de tu soluci√≥n (producto/servicio)?",
                        options: [
                            { text: "Es una idea general; a√∫n no hemos detallado las caracter√≠sticas espec√≠ficas.", score: 1 },
                            { text: "Hemos listado las caracter√≠sticas principales, pero sin entrar en detalles t√©cnicos o de funcionamiento.", score: 2 },
                            { text: "Tenemos una lista detallada de caracter√≠sticas, funcionalidades y c√≥mo interactuar√°n entre s√≠.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øHas validado las caracter√≠sticas de tu soluci√≥n con clientes potenciales?",
                        options: [
                            { text: "No, las caracter√≠sticas se basan en lo que nosotros creemos que los clientes necesitan.", score: 1 },
                            { text: "Hemos comentado las caracter√≠sticas con potenciales clientes, pero sin mostrarles un prototipo o demo.", score: 2 },
                            { text: "Hemos mostrado un prototipo, maqueta o demo a clientes y hemos ajustado las caracter√≠sticas seg√∫n su feedback directo.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øHas validado que los clientes est√°n dispuestos a pagar por tu soluci√≥n?",
                        options: [
                            { text: "No hemos hablado de precios con los clientes; asumimos que pagar√°n si les gusta el producto.", score: 1 },
                            { text: "Los clientes han dicho que 'estar√≠an dispuestos a pagar', pero no hay un compromiso real (un pago o un contrato).", score: 2 },
                            { text: "Tenemos evidencia real de viabilidad: pre-ventas, pilotos pagados, o cartas de intenci√≥n firmadas.", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Mercado y Cliente",
                items: [
                    {
                        q: "¬øQu√© tan profundo es tu conocimiento del cliente objetivo?",
                        options: [
                            { text: "Creemos que nuestro producto es 'para todo el mundo'. No tenemos un perfil de cliente espec√≠fico.", score: 1 },
                            { text: "Tenemos una idea general de qui√©n es nuestro cliente (ej: 'j√≥venes de 20 a 30 a√±os').", score: 2 },
                            { text: "Tenemos un perfil detallado de nuestro 'cliente ideal', creado a partir de entrevistas, encuestas y datos reales.", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Modelo de Negocio y Operaciones",
                items: [
                     {
                        q: "¬øQu√© tan claro y validado est√° tu modelo para generar ingresos?",
                        options: [
                            { text: "No estamos seguros de c√≥mo vamos a ganar dinero. Quiz√°s con publicidad en el futuro.", score: 1 },
                            { text: "Tenemos una idea clara de nuestra principal fuente de ingresos, pero a√∫n no hay ventas reales que la validen.", score: 2 },
                            { text: "Tenemos un modelo de ingresos probado (ventas recurrentes, transacciones, etc.) y entendemos nuestras m√©tricas.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øYa has definido los precios de tu producto o servicio?",
                        options: [
                            { text: "No, a√∫n no hemos pensado en los precios ni en una estrategia.", score: 1 },
                            { text: "Tenemos una idea general de los precios, pero no basada en un an√°lisis formal.", score: 2 },
                            { text: "Hemos definido una estrategia de precios clara, basada en costos, valor y an√°lisis de la competencia.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øQu√© tan eficientes y escalables son tus operaciones?",
                        options: [
                            { text: "A√∫n no hemos dise√±ado c√≥mo va a operar el proyecto; es una idea sin procesos definidos.", score: 1 },
                            { text: "Todo es manual y depende 100% de m√≠. Si tuvi√©ramos 10 clientes m√°s, el sistema colapsar√≠a.", score: 2 },
                            { text: "Hemos empezado a estandarizar algunos procesos, pero todav√≠a hay muchos cuellos de botella.", score: 3 },
                            { text: "Tenemos procesos claros y herramientas que nos permiten crecer sin un aumento proporcional en los costos.", score: 4 }
                        ]
                    }
                ]
            },
            {
                area: "Finanzas y Financiamiento",
                items: [
                    {
                        q: "¬øQu√© tan bien conoces los costos de tu proyecto?",
                        options: [
                            { text: "No tenemos una idea clara de los costos; es solo una estimaci√≥n general.", score: 1 },
                            { text: "Hemos listado los principales costos (ej: sueldos, marketing), pero sin un presupuesto detallado.", score: 2 },
                            { text: "Tenemos un presupuesto detallado que incluye costos de desarrollo, operativos y de lanzamiento.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øCu√°l es tu plan para financiar el proyecto?",
                        options: [
                            { text: "Dependemos 100% de ganar un fondo (p√∫blico o privado) y no tenemos un plan B si no lo conseguimos.", score: 1 },
                            { text: "Usaremos principalmente recursos propios, pero nuestro avance ser√° lento. O, buscamos fondos y tenemos un plan reducido si no los ganamos.", score: 2 },
                            { text: "Tenemos una estrategia clara: combinamos capital propio comprometido con un plan para buscar fondos externos, y tenemos un plan de contingencia.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øC√≥mo planeas medir el crecimiento de tu empresa?",
                        options: [
                            { text: "No hemos definido c√≥mo mediremos el √©xito o el crecimiento.", score: 1 },
                            { text: "Nos basaremos en m√©tricas de vanidad (ej: 'likes', seguidores) o en los ingresos totales, sin mayor an√°lisis.", score: 2 },
                            { text: "Hemos definido Indicadores Clave de Desempe√±o (KPIs) claros, como n√∫mero de clientes, ingresos recurrentes o tasa de retenci√≥n.", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Equipo Fundador",
                items: [
                    {
                        q: "¬øEl equipo tiene las habilidades y la dedicaci√≥n necesarias?",
                        options: [
                            { text: "Soy solo yo, o los co-fundadores tienen habilidades muy similares, dejando brechas cr√≠ticas.", score: 1 },
                            { text: "El equipo tiene habilidades complementarias, pero algunos miembros est√°n a tiempo parcial.", score: 2 },
                            { text: "Somos un equipo dedicado a tiempo completo, con habilidades complementarias que cubren las √°reas clave.", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Marketing y Ventas",
                items: [
                    {
                        q: "¬øCuentas con material de marketing y ventas para presentar tu proyecto?",
                        options: [
                            { text: "No tenemos ning√∫n material de presentaci√≥n (ni digital ni f√≠sico).", score: 1 },
                            { text: "Tenemos una presentaci√≥n b√°sica o un borrador de brochure hecho por nosotros.", score: 2 },
                            { text: "Contamos con material de presentaci√≥n profesional (brochure, cat√°logo, web, etc.) listo para mostrar a clientes.", score: 3 }
                        ]
                    },
                    {
                        q: "¬øTienes una estrategia definida para llegar a tus primeros clientes?",
                        options: [
                            { text: "Esperamos que los clientes lleguen a nosotros por el 'boca a boca' o por suerte.", score: 1 },
                            { text: "Hemos probado algunas acciones aisladas (ej: ir a un evento, publicar en redes sociales) sin un plan claro ni medici√≥n.", score: 2 },
                            { text: "Tenemos un plan claro para buscar clientes, combinando estrategias (ej: marketing digital, ventas directas, ferias) y midiendo los resultados.", score: 3 }
                        ]
                    }
                ]
            },
            {
                area: "Estrategia y Escalabilidad",
                items: [
                    {
                        q: "¬øCu√°l es tu visi√≥n y plan de crecimiento a largo plazo?",
                        options: [
                            { text: "Nuestro √∫nico foco es sobrevivir el pr√≥ximo mes. No hemos pensado m√°s all√°.", score: 1 },
                            { text: "Tenemos algunas ideas sobre c√≥mo podr√≠amos crecer, pero no hay un plan concreto.", score: 2 },
                            { text: "Tenemos una visi√≥n clara a 3-5 a√±os y una hoja de ruta estrat√©gica con hitos clave.", score: 3 }
                        ]
                    }
                ]
            }
        ];

        const actionPlans = {
            "Propuesta de Valor y Producto/Servicio": {
                low: {
                    title: "Redefinir y Validar la Propuesta de Valor",
                    steps: [
                        "**Acci√≥n Inmediata:** Det√©n el desarrollo. Tu prioridad es la validaci√≥n.",
                        "**Entrevistas con Clientes:** Habla con al menos 20-30 personas de tu p√∫blico objetivo. No intentes vender, busca entender sus problemas y frustraciones.",
                        "**Lean Canvas:** Utiliza la herramienta Lean Canvas para mapear y aclarar tu modelo de negocio en una sola p√°gina. Enf√≥cate en el cuadrante 'Problema' y 'Segmento de Clientes'.",
                        "**Construye un MVP (Producto M√≠nimo Viable):** Crea la versi√≥n m√°s simple posible de tu producto que resuelva el problema principal para un grupo peque√±o de usuarios."
                    ]
                },
                medium: {
                    title: "Fortalecer y Diferenciar la Soluci√≥n",
                    steps: [
                        "**An√°lisis Competitivo:** Realiza un an√°lisis exhaustivo de tus 2-3 competidores principales. ¬øQu√© hacen bien? ¬øD√≥nde est√°n sus debilidades?",
                        "**Identifica tu 'Salsa Secreta':** ¬øQu√© te hace √∫nico? ¬øEs tu tecnolog√≠a, tu servicio al cliente, tu dise√±o, tu comunidad? Potencia ese diferenciador.",
                        "**Recopila Testimonios:** Pide a tus clientes actuales que te den testimonios detallados. √ösalos para refinar tu mensaje de marketing.",
                        "**Hoja de Ruta del Producto:** Crea un plan de desarrollo para los pr√≥ximos 6-12 meses basado en el feedback de los clientes y tus objetivos estrat√©gicos."
                    ]
                },
                high: {
                    title: "Capitalizar y Expandir la Propuesta de Valor",
                    steps: [
                        "**Crea un 'Foso' Competitivo:** Invierte en tu ventaja competitiva para hacerla m√°s dif√≠cil de copiar. Esto puede ser a trav√©s de patentes, construcci√≥n de marca o creando efectos de red.",
                        "**Explora Extensiones de Producto:** ¬øQu√© otros problemas relacionados tienen tus clientes que podr√≠as resolver?",
                        "**Liderazgo de Opini√≥n:** Posici√≥nate como un experto en tu industria a trav√©s de blogs, webinars o informes. Esto fortalece tu marca y tu propuesta de valor."
                    ]
                }
            },
            "Soluci√≥n y Validaci√≥n": {
                low: {
                    title: "Definir, Prototipar y Validar la Soluci√≥n",
                    steps: [
                        "**Prioriza Caracter√≠sticas:** Haz una lista de todas las posibles caracter√≠sticas y clasif√≠calas en 'indispensables' y 'deseables'. Enf√≥cate solo en las indispensables.",
                        "**Crea un Prototipo Simple:** Usa papel, Powerpoint o herramientas como Figma para crear una maqueta visual de tu soluci√≥n. No necesitas programar.",
                        "**Valida con Clientes:** Muestra tu prototipo a clientes potenciales y pregunta: '¬øEsto resuelve tu problema? ¬øPagar√≠as X por esto?'. La pregunta del precio es clave.",
                        "**Busca el Compromiso:** El objetivo final es conseguir una pre-venta, un piloto pagado o una carta de intenci√≥n. Es la √∫nica validaci√≥n real."
                    ]
                },
                medium: {
                    title: "Convertir Inter√©s en Compromiso Real",
                    steps: [
                        "**Crea una Oferta de Pre-venta:** Ofrece un descuento o beneficio exclusivo a quienes paguen por tu soluci√≥n antes de que est√© lista. Esto crea urgencia y valida la demanda.",
                        "**Test de Usabilidad:** Muestra tu prototipo a 5-10 clientes y p√≠deles que completen una tarea. Observa d√≥nde se confunden para mejorar el dise√±o.",
                        "**No te f√≠es del 's√≠, lo comprar√≠a':** Las palabras son baratas. Pide un compromiso tangible. Si dicen que pagar√≠an, pres√©ntales una orden de compra o un link de pago.",
                        "**Itera sobre el Feedback:** Ajusta tu prototipo y tu oferta bas√°ndote en lo que aprendiste. Repite el proceso hasta conseguir ventas reales."
                    ]
                },
                high: {
                    title: "Optimizar y Preparar para el Desarrollo",
                    steps: [
                        "**Analiza a tus Primeros Clientes:** ¬øQu√© tienen en com√∫n los que s√≠ pagaron? Usa esa informaci√≥n para refinar tu perfil de 'cliente ideal'.",
                        "**Define el 'Producto M√≠nimo Viable' (MVP):** Con la validaci√≥n de pago, ahora puedes seleccionar con confianza el conjunto m√°s peque√±o de caracter√≠sticas para construir.",
                        "**Crea un 'Product Backlog':** Transforma tus caracter√≠sticas validadas en 'historias de usuario' detalladas. Este ser√° el plan de trabajo para el desarrollo.",
                        "**Establece M√©tricas de √âxito por Caracter√≠stica:** ¬øC√≥mo sabr√°s si una caracter√≠stica es utilizada y valorada? Define c√≥mo medirlo (ej: % de usuarios que la usan, tiempo en la funci√≥n)."
                    ]
                }
            },
            "Mercado y Cliente": {
                low: {
                    title: "Descubrir y Entender a tu Cliente",
                    steps: [
                        "**'Sal del Edificio':** Tu misi√≥n es encontrar a tus clientes. Asiste a eventos de la industria, participa en foros online, ve a donde ellos est√°n.",
                        "**Crea 'Proto-Personas':** Basado en tus hip√≥tesis, crea perfiles de cliente ficticios. Luego, sal a validarlos o refutarlos con personas reales.",
                        "**Encuestas de Validaci√≥n:** Utiliza herramientas como Google Forms o SurveyMonkey para validar a mayor escala el problema que intentas resolver.",
                        "**No construyas nada m√°s:** Hasta que no tengas evidencia clara de que hay un grupo de personas con un problema real, no escribas ni una l√≠nea m√°s de c√≥digo."
                    ]
                },
                medium: {
                    title: "Profundizar la Relaci√≥n y Segmentar",
                    steps: [
                        "**Mapa de Empat√≠a:** Para tus 'Buyer Personas', crea un Mapa de Empat√≠a. ¬øQu√© piensan, sienten, ven y oyen? Esto te dar√° insights valiosos.",
                        "**Segmentaci√≥n:** ¬øPuedes agrupar a tus clientes actuales en segmentos con necesidades o comportamientos similares? Esto te permitir√° personalizar tu marketing y producto.",
                        "**Canales de Feedback:** Establece canales formales para recibir feedback constante: encuestas de satisfacci√≥n, un email dedicado, etc.",
                        "**Mide la Activaci√≥n:** ¬øQu√© acciones clave debe realizar un nuevo usuario para obtener valor de tu producto? Mide y optimiza este proceso."
                    ]
                },
                high: {
                    title: "Liderar y Expandir tu Nicho de Mercado",
                    steps: [
                        "**Estudio de 'Jobs-to-be-Done':** Investiga no solo 'qui√©n' es tu cliente, sino 'para qu√© trabajo' contratan tu producto. Esto puede revelar nuevos casos de uso y mercados.",
                        "**Programa de Referidos:** Implementa un programa que incentive a tus clientes felices a recomendar tu producto. Es la forma m√°s barata y efectiva de crecer.",
                        "**Exploraci√≥n de Mercados Adyacentes:** ¬øHay otros segmentos de clientes o geograf√≠as que podr√≠an beneficiarse de tu soluci√≥n?"
                    ]
                }
            },
            "Modelo de Negocio y Operaciones": {
                low: {
                    title: "Definir y Sistematizar el Negocio",
                    steps: [
                        "**Define tu Estrategia de Precios:** Investiga cu√°nto cobra la competencia y cu√°nto valor entregas. Calcula un precio inicial para validarlo con clientes.",
                        "**Mapeo de Procesos:** Dibuja en un papel el flujo completo de tu operaci√≥n, desde que un cliente te conoce hasta que le entregas el valor. Identifica los cuellos de botella.",
                        "**Define tu Modelo de Ingresos:** Investiga diferentes modelos (suscripci√≥n, transacci√≥n, freemium, etc.) y elige uno para probar. S√© espec√≠fico.",
                        "**Calcula tus Costos y Punto de Equilibrio:** Haz un c√°lculo r√°pido de tus ingresos y costos estimados para ver si el modelo tiene sentido a grandes rasgos."
                    ]
                },
                medium: {
                    title: "Optimizar y Escalar Operaciones",
                    steps: [
                        "**Realiza Pruebas de Precios:** Considera ofrecer diferentes paquetes o precios a nuevos clientes para ver qu√© funciona mejor y maximizar tus ingresos.",
                        "**Manual de Operaciones:** Documenta tus procesos clave. Esto es esencial para delegar y contratar en el futuro.",
                        "**Adopta un CRM:** Empieza a usar un sistema de gesti√≥n de relaciones con clientes (como HubSpot, Zoho o Airtable) para centralizar la informaci√≥n.",
                        "**Identifica tus KPIs Operativos:** Define 3-5 m√©tricas clave para medir la eficiencia de tus operaciones (ej. tiempo de entrega, costo por servicio, etc.)."
                    ]
                },
                high: {
                    title: "Innovar en el Modelo y Lograr Eficiencia de √âlite",
                    steps: [
                        "**Diversificaci√≥n de Ingresos:** Explora fuentes de ingresos adicionales que complementen tu oferta principal.",
                        "**Integraciones y API:** Abre tu plataforma a trav√©s de una API para que otros puedan construir sobre ella, creando un ecosistema.",
                        "**Optimizaci√≥n de la Cadena de Valor:** Analiza toda tu cadena de valor, desde proveedores hasta la entrega final, y busca oportunidades de mejora y ahorro."
                    ]
                }
            },
            "Finanzas y Financiamiento": {
                low: {
                    title: "Establecer Control y Planificaci√≥n Financiera B√°sica",
                    steps: [
                        "**Acci√≥n Inmediata: Detalla tus costos.** Usa una planilla para listar todos los gastos posibles que necesitar√°s para empezar y operar por 3 meses.",
                        "**Define un Plan de Financiamiento Realista:** Si dependes de fondos externos, ¬øqu√© har√°s si no los ganas? Crea un 'Plan B' con recursos propios, aunque sea m√°s peque√±o o lento.",
                        "**Establece UNA M√©trica Clave:** Elige un solo indicador de √©xito para empezar (ej: 'n√∫mero de usuarios registrados' o 'primera venta'). Enf√≥cate solo en eso.",
                        "**Separa tus Finanzas:** Abre una cuenta bancaria exclusiva para el negocio. Es un paso crucial para la formalidad."
                    ]
                },
                medium: {
                    title: "Desarrollar una Estrategia Financiera Sostenible",
                    steps: [
                        "**Crea un Presupuesto Formal:** Transforma tu lista de costos en un presupuesto mensual para los pr√≥ximos 6-12 meses. Asigna responsables a cada gasto.",
                        "**Define tu Estrategia de 'Bootstrapping':** Si usar√°s fondos propios, define hasta cu√°ndo y qu√© hitos debes alcanzar antes de buscar capital externo.",
                        "**Define tus KPIs Iniciales:** Selecciona 3-5 KPIs que realmente midan la salud de tu negocio (ej: Costo de Adquisici√≥n de Cliente, Ingresos Mensuales Recurrentes, Tasa de Activaci√≥n).",
                        "**Prepara un 'Pitch' para Inversionistas:** Aunque no busques fondos ahora, prepara una presentaci√≥n que explique tu modelo de negocio y necesidades financieras. Te obligar√° a aclarar tus ideas."
                    ]
                },
                high: {
                    title: "Optimizar la Gesti√≥n Financiera para el Crecimiento",
                    steps: [
                        "**Crea Proyecciones Financieras a 18-24 meses:** Desarrolla un modelo financiero detallado (Estado de Resultados, Flujo de Caja) que te permita planificar a largo plazo.",
                        "**Construye un 'Data Room':** Organiza toda tu informaci√≥n financiera, legal y de m√©tricas en un solo lugar. Es indispensable para procesos de 'due diligence' con inversionistas.",
                        "**Analiza la Rentabilidad por Cohorte:** Agrupa a tus clientes por mes de adquisici√≥n y analiza su comportamiento y rentabilidad en el tiempo. Esto te dar√° insights muy valiosos.",
                        "**Define tu 'North Star Metric':** Elige una √∫nica m√©trica que capture el valor principal que entregas a tus clientes. Todo el equipo debe enfocarse en mejorarla."
                    ]
                }
            },
            "Equipo Fundador": {
                low: {
                    title: "Fortalecer o Completar el Equipo Fundador",
                    steps: [
                        "**Autoevaluaci√≥n de Habilidades:** Haz una lista honesta de tus fortalezas y debilidades. ¬øQu√© habilidad cr√≠tica le falta al negocio (tecnolog√≠a, ventas, operaciones)?",
                        "**Networking Activo:** Busca un co-fundador como si tu vida dependiera de ello. Asiste a meetups, hackathons y eventos de la industria.",
                        "**Acuerdo de Fundadores:** Antes de asociarte con alguien, discute y documenta temas clave: roles, responsabilidades, participaci√≥n accionaria, vesting, y qu√© pasa si alguien se va.",
                        "**Busca Mentores:** Encuentra 1-2 personas con experiencia que puedan aconsejarte y cubrir temporalmente tus brechas de conocimiento."
                    ]
                },
                medium: {
                    title: "Alinear y Formalizar el Equipo",
                    steps: [
                        "**Establece un 'Vesting Schedule':** Si a√∫n no lo tienes, implementa un plan de vesting para todos los fundadores. Es el est√°ndar de la industria y protege a todos.",
                        "**Define Roles y Responsabilidades Claras:** Crea un documento que especifique qui√©n es el responsable final de cada √°rea del negocio (CEO, CTO, COO, etc.).",
                        "**Cultura de Comunicaci√≥n:** Establece un ritmo de reuniones semanales para sincronizar al equipo, tomar decisiones y mantener a todos alineados.",
                        "**Plan de Contrataci√≥n:** Identifica cu√°l ser√° la primera contrataci√≥n clave que necesitar√°s hacer cuando tengas los recursos."
                    ]
                },
                high: {
                    title: "Escalar el Liderazgo y la Cultura",
                    steps: [
                        "**Define tus Valores Culturales:** ¬øQu√© principios guiar√°n la forma en que trabajan y toman decisiones a medida que crecen? Escr√≠belos.",
                        "**Desarrollo de Liderazgo:** Como fundador, tu rol cambiar√° de 'hacer' a 'gestionar' y 'liderar'. Invierte en tu propio desarrollo (libros, cursos, coaching).",
                        "**Crea un 'Advisory Board':** Re√∫ne a un grupo de 3-5 expertos de la industria para que te asesoren formalmente a cambio de una peque√±a participaci√≥n accionaria."
                    ]
                }
            },
            "Marketing y Ventas": {
                low: {
                    title: "Construir las Herramientas y el Plan de Adquisici√≥n",
                    steps: [
                        "**Elige UN Canal para Empezar:** No intentes estar en todos lados. Basado en d√≥nde est√° tu cliente, elige un solo canal (ej: Ventas directas en ferias, LinkedIn, Anuncios en Instagram) y enf√≥cate en √©l.",
                        "**Crea tu 'Elevator Pitch':** Desarrolla una explicaci√≥n de 20 segundos de lo que haces, para qui√©n y por qu√© es importante. Pract√≠cala.",
                        "**Dise√±a un Brochure o Landing Page Simple:** Crea una pieza de material (digital o f√≠sico) que explique tu propuesta de valor y tenga un llamado a la acci√≥n claro (ej: 'Pide una cotizaci√≥n', 'Reg√≠strate').",
                        "**Sal a Vender 'Artesanalmente':** Realiza las primeras ventas t√∫ mismo. Llama por tel√©fono, visita potenciales clientes, env√≠a emails personalizados. Aprende de cada interacci√≥n."
                    ]
                },
                medium: {
                    title: "Sistematizar y Medir el Proceso de Ventas",
                    steps: [
                        "**Dibuja el 'Camino del Cliente':** Mapea los pasos que da una persona desde que no te conoce hasta que se convierte en un cliente fiel, considerando puntos de contacto online y offline.",
                        "**Implementa un Sistema de Seguimiento:** Usa un CRM simple o una planilla para registrar cada interacci√≥n con un potencial cliente. ¬øQui√©n es? ¬øCu√°ndo hablaste con √©l? ¬øQu√© le interesa?",
                        "**Prueba y Error Sistem√°tico:** Dedica un peque√±o presupuesto a experimentar con 2-3 canales (online u offline). Mide el costo por lead y por cliente de cada uno.",
                        "**Prepara tu Material de Ventas:** Profesionaliza tu brochure, presentaci√≥n o p√°gina web. Aseg√∫rate de que comunique claramente los beneficios."
                    ]
                },
                high: {
                    title: "Escalar la M√°quina de Crecimiento",
                    steps: [
                        "**Contrata a tu Primer Vendedor o Marketer:** Busca a alguien que pueda tomar el sistema que has construido y ejecutarlo a mayor escala.",
                        "**Automatizaci√≥n de Marketing:** Utiliza herramientas para automatizar secuencias de emails, publicaciones en redes sociales y nutrici√≥n de leads.",
                        "**Optimizaci√≥n de la Conversi√≥n (CRO):** Realiza pruebas A/B en tu landing page, emails y anuncios para mejorar continuamente tus tasas de conversi√≥n."
                    ]
                }
            },
            "Estrategia y Escalabilidad": {
                low: {
                    title: "Definir la Direcci√≥n y la Visi√≥n",
                    steps: [
                        "**Establece Metas a 90 D√≠as:** Olvida los 5 a√±os. ¬øCu√°l es el objetivo m√°s importante que debes lograr en el pr√≥ximo trimestre? (ej. 'Conseguir 10 clientes de pago').",
                        "**Escribe tu Declaraci√≥n de Misi√≥n:** ¬øPor qu√© existe tu empresa m√°s all√° de ganar dinero? Esto guiar√° tus decisiones.",
                        "**An√°lisis FODA:** Realiza un an√°lisis simple de tus Fortalezas, Oportunidades, Debilidades y Amenazas. Te dar√° una visi√≥n clara de tu situaci√≥n actual.",
                        "**Habla con Emprendedores m√°s Avanzados:** Busca consejo de quienes ya han pasado por tu etapa. Sus perspectivas son invaluables."
                    ]
                },
                medium: {
                    title: "Construir una Hoja de Ruta Estrat√©gica",
                    steps: [
                        "**Crea un 'Roadmap' a 18 meses:** Define los hitos clave de producto, marketing y finanzas que quieres alcanzar en el pr√≥ximo a√±o y medio.",
                        "**Define tus 'North Star Metric':** Elige una √∫nica m√©trica que capture el valor principal que entregas a tus clientes (ej. para Airbnb, 'noches reservadas'). Todo el equipo debe enfocarse en mejorarla.",
                        "**Planificaci√≥n de Escenarios:** ¬øQu√© har√≠as si tus ventas se duplican ma√±ana? ¬øY si se reducen a la mitad? Piensa en planes de contingencia b√°sicos.",
                        "**Revisa tu Estrategia Trimestralmente:** El mercado cambia r√°pido. Dedica un d√≠a cada tres meses a revisar tu plan y ajustarlo si es necesario."
                    ]
                },
                high: {
                    title: "Prepararse para la Expansi√≥n Estrat√©gica",
                    steps: [
                        "**Investiga Mercados Adyacentes:** Analiza oportunidades de expansi√≥n a nuevas geograf√≠as, segmentos de clientes o industrias.",
                        "**Construye Alianzas Estrat√©gicas:** Identifica empresas que no compiten contigo pero que sirven al mismo cliente. Busca formas de colaborar.",
                        "**Piensa en tu 'Jugada Final':** ¬øCu√°l es el objetivo a largo plazo? ¬øSer adquiridos, salir a bolsa, seguir siendo una empresa privada rentable? Tu estrategia cambiar√° dependiendo de la respuesta."
                    ]
                }
            }
        };

        let currentResults = {};

        document.addEventListener('DOMContentLoaded', () => {
            const questionsContainer = document.getElementById('questions-container');
            let questionCounter = 1;

            questions.forEach((section, sectionIndex) => {
                const sectionDiv = document.createElement('div');
                sectionDiv.className = 'question-card bg-white p-6 rounded-xl shadow-md border border-gray-200';
                
                const sectionTitle = document.createElement('h2');
                sectionTitle.className = 'text-xl font-bold mb-6 text-indigo-700';
                sectionTitle.textContent = `√Årea ${sectionIndex + 2}: ${section.area}`;
                sectionDiv.appendChild(sectionTitle);

                section.items.forEach((item) => {
                    const questionWrapper = document.createElement('div');
                    questionWrapper.className = 'mb-6';
                    
                    const questionText = document.createElement('p');
                    questionText.className = 'font-semibold text-gray-800 mb-3';
                    questionText.textContent = `${questionCounter + 1}. ${item.q}`;
                    questionWrapper.appendChild(questionText);

                    const optionsWrapper = document.createElement('div');
                    optionsWrapper.className = 'space-y-3';
                    
                    item.options.forEach((option, optionIndex) => {
                        const optionId = `q${questionCounter + 1}_o${optionIndex}`;
                        
                        const radioInput = document.createElement('input');
                        radioInput.type = 'radio';
                        radioInput.id = optionId;
                        radioInput.name = `question_${questionCounter + 1}`;
                        radioInput.value = option.score;
                        radioInput.className = 'sr-only'; // Screen reader only
                        radioInput.required = true;

                        const label = document.createElement('label');
                        label.htmlFor = optionId;
                        label.className = 'option-label';
                        label.textContent = option.text;

                        optionsWrapper.appendChild(radioInput);
                        optionsWrapper.appendChild(label);
                    });

                    questionWrapper.appendChild(optionsWrapper);
                    sectionDiv.appendChild(questionWrapper);
                    questionCounter++;
                });
                questionsContainer.appendChild(sectionDiv);
            });

            const form = document.getElementById('diagnostic-form');
            form.addEventListener('submit', (e) => {
                e.preventDefault();
                calculateAndShowResults();
            });

            document.getElementById('print-button').addEventListener('click', () => window.print());
            
            document.getElementById('restart-button').addEventListener('click', () => {
                document.getElementById('results-section').classList.add('hidden');
                document.getElementById('welcome-section').classList.remove('hidden');
                document.getElementById('diagnostic-form').classList.remove('hidden');
                form.reset();
                window.scrollTo({ top: 0, behavior: 'smooth' });
            });
        });

        function calculateAndShowResults() {
            const submitButton = document.getElementById('submit-button');
            submitButton.disabled = true;
            submitButton.textContent = 'Generando y Guardando...';

            const scores = {};
            let totalScore = 0;
            let questionCounter = 1; 
            let allAnswered = true;
            
            const contactInfo = {
                projectName: document.getElementById('projectName').value,
                entrepreneurName: document.getElementById('entrepreneurName').value,
                entrepreneurEmail: document.getElementById('entrepreneurEmail').value,
                diagnosticType: document.getElementById('diagnosticType').value
            };

            questions.forEach(section => {
                let areaScore = 0;
                let areaMaxScore = 0;
                section.items.forEach(item => {
                    questionCounter++;
                    const selectedOption = document.querySelector(`input[name="question_${questionCounter}"]:checked`);
                    if (selectedOption) {
                        areaScore += parseInt(selectedOption.value);
                    } else {
                        allAnswered = false;
                    }
                    const maxOptionScore = Math.max(...item.options.map(opt => opt.score));
                    areaMaxScore += maxOptionScore;
                });
                scores[section.area] = {
                    score: areaScore,
                    maxScore: areaMaxScore
                };
                totalScore += areaScore;
            });

            if (!allAnswered) {
                alert('Por favor, responde todas las preguntas para continuar.');
                submitButton.disabled = false;
                submitButton.textContent = 'Generar Diagn√≥stico y Plan de Acci√≥n';
                return;
            }
            
            const totalMaxScore = Object.values(scores).reduce((sum, data) => sum + data.maxScore, 0);

            currentResults = {
                contactInfo,
                scores,
                totalScore,
                totalMaxScore
            };
            
            sendDataToSheet(currentResults).finally(() => {
                displayResults(currentResults);
                submitButton.disabled = false;
                submitButton.textContent = 'Generar Diagn√≥stico y Plan de Acci√≥n';
            });
        }

        async function sendDataToSheet(results) {
            const scriptURL = 'https://script.google.com/macros/s/AKfycbyiqLIeqXmG07nGyAV0p6bacIipFeuDFkSQQ1LOkTFL7HTAPp5aPGBqoxSsKE_FMGEbzg/exec';

            if (scriptURL === 'PEGAR_AQU√ç_LA_URL_DEL_SCRIPT') {
                console.warn("La URL del script de Google Sheets no ha sido configurada. Los datos no se guardar√°n.");
                return; 
            }

            const payload = {
                projectName: results.contactInfo.projectName,
                entrepreneurName: results.contactInfo.entrepreneurName,
                entrepreneurEmail: results.contactInfo.entrepreneurEmail,
                diagnosticType: results.contactInfo.diagnosticType,
                totalScore: results.totalScore,
                totalMaxScore: results.totalMaxScore,
                scores: results.scores
            };

            try {
                const response = await fetch(scriptURL, {
                    method: 'POST',
                    mode: 'cors',
                    cache: 'no-cache',
                    headers: {
                        'Content-Type': 'text/plain;charset=utf-8', 
                    },
                    body: JSON.stringify(payload)
                });
                const data = await response.json();
                console.log('Success:', data);
            } catch (error) {
                console.error('Error sending data to Google Sheet:', error);
                alert("Hubo un error al guardar los datos en la planilla. Por favor, guarda una copia en PDF.");
            }
        }

        function displayResults(results) {
            const { contactInfo, scores, totalScore, totalMaxScore } = results;
            
            document.getElementById('diagnostic-form').classList.add('hidden');
            document.getElementById('welcome-section').classList.add('hidden');
            document.getElementById('results-section').classList.remove('hidden');

            const resultsContactInfoEl = document.getElementById('results-contact-info');
            resultsContactInfoEl.innerHTML = `
                <p><strong>Proyecto:</strong> ${contactInfo.projectName}</p>
                <p><strong>Emprendedor/a:</strong> ${contactInfo.entrepreneurName}</p>
                <p><strong>Tipo:</strong> Diagn√≥stico ${contactInfo.diagnosticType}</p>
            `;

            const overallDiagnosisEl = document.getElementById('overall-diagnosis');
            let diagnosisText = '';
            let diagnosisClass = '';
            const overallPercentage = (totalScore / totalMaxScore) * 100;

            if (overallPercentage <= 45) {
                diagnosisText = 'üî¥ Etapa Cr√≠tica / Idea';
                diagnosisClass = 'bg-red-100 text-red-800';
            } else if (overallPercentage <= 75) {
                diagnosisText = 'üü° Etapa de Mejora / Crecimiento Temprano';
                diagnosisClass = 'bg-yellow-100 text-yellow-800';
            } else {
                diagnosisText = 'üü¢ Etapa S√≥lida / Expansi√≥n';
                diagnosisClass = 'bg-green-100 text-green-800';
            }
            overallDiagnosisEl.innerHTML = `<h3 class="text-xl font-bold">${diagnosisText}</h3><p class="mt-1">Puntuaci√≥n Total: <strong>${totalScore} / ${totalMaxScore}</strong></p>`;
            overallDiagnosisEl.className = `text-center mb-8 p-4 rounded-lg ${diagnosisClass}`;

            const scoreSummaryEl = document.getElementById('score-summary');
            scoreSummaryEl.innerHTML = '';
            Object.entries(scores).forEach(([area, data]) => {
                const percentage = (data.score / data.maxScore) * 100;
                let bgColor = '';
                if (percentage <= 50) bgColor = 'bg-red-100';
                else if (percentage <= 80) bgColor = 'bg-yellow-100';
                else bgColor = 'bg-green-100';

                scoreSummaryEl.innerHTML += `
                    <div class="p-4 rounded-lg ${bgColor}">
                        <p class="font-semibold text-gray-800">${area}</p>
                        <div class="flex items-center justify-between">
                            <p class="text-sm text-gray-600">Puntuaci√≥n: ${data.score} / ${data.maxScore}</p>
                            <div class="w-full bg-gray-200 rounded-full h-2.5 ml-4">
                                <div class="h-2.5 rounded-full" style="width: ${percentage}%; background-color: ${getBarColor(percentage)};"></div>
                            </div>
                        </div>
                    </div>
                `;
            });

            const actionPlanEl = document.getElementById('action-plan');
            actionPlanEl.innerHTML = '';
            
            const sortedAreas = Object.entries(scores).sort(([,a], [,b]) => (a.score/a.maxScore) - (b.score/b.maxScore));

            sortedAreas.forEach(([area, data]) => {
                const percentage = (data.score / data.maxScore) * 100;
                let plan;
                let statusClass, statusText;

                if (percentage <= 50) {
                    plan = actionPlans[area].low;
                    statusClass = 'bg-red-500';
                    statusText = 'Atenci√≥n Prioritaria';
                } else if (percentage <= 80) {
                    plan = actionPlans[area].medium;
                    statusClass = 'bg-yellow-500';
                    statusText = '√Årea de Mejora';
                } else {
                    plan = actionPlans[area].high;
                    statusClass = 'bg-green-500';
                    statusText = 'Fortaleza a Capitalizar';
                }

                const planHtml = `
                    <div class="bg-white border border-gray-200 rounded-lg p-6 shadow-sm">
                        <div class="flex justify-between items-start mb-4">
                            <div>
                                <h4 class="text-lg font-bold text-gray-900">${area}</h4>
                                <p class="font-semibold text-gray-700">${plan.title}</p>
                            </div>
                            <span class="text-xs font-bold text-white ${statusClass} px-3 py-1 rounded-full">${statusText}</span>
                        </div>
                        <ul class="list-disc list-inside space-y-2 text-gray-600">
                            ${plan.steps.map(step => `<li>${step.replace(/\*\*(.*?)\*\*/g, '<strong>$1</strong>')}</li>`).join('')}
                        </ul>
                    </div>
                `;
                actionPlanEl.innerHTML += planHtml;
            });
            
            window.scrollTo({ top: document.getElementById('results-section').offsetTop - 20, behavior: 'smooth' });
        }

        function getBarColor(percentage) {
            if (percentage <= 50) return '#ef4444'; // red-500
            if (percentage <= 80) return '#f59e0b'; // amber-500
            return '#22c55e'; // green-500
        }

    </script>
</body>
</html>
